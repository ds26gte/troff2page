-- last modified 2017-08-19

--refer groff_char(7)
Standard_glyphs = {

  ["'A"] = 0xc1,
  ["'C"] = 0x106,
  ["'E"] = 0xc9,
  ["'I"] = 0xcd,
  ["'O"] = 0xd3,
  ["'U"] = 0xda,
  ["'Y"] = 0xdd,
  ["'a"] = 0xe1,
  ["'c"] = 0x107,
  ["'e"] = 0xe9,
  ["'i"] = 0xed,
  ["'o"] = 0xf3,
  ["'u"] = 0xfa,
  ["'y"] = 0xfd,
  [' '] = 0xa0, -- &nbsp;
  ['!='] = 0x2260,
  ['%'] = 0x200c,
  ['%0'] = 0x2030,
  ['&'] = 0x200c,
  ['**'] = 0x2217,
  ['*A'] = 0x391,
  ['*B'] = 0x392,
  ['*C'] = 0x39e,
  ['*D'] = 0x394,
  ['*E'] = 0x395,
  ['*F'] = 0x3a6,
  ['*G'] = 0x393,
  ['*H'] = 0x398,
  ['*I'] = 0x399,
  ['*K'] = 0x39a,
  ['*L'] = 0x39b,
  ['*M'] = 0x39c,
  ['*N'] = 0x39d,
  ['*O'] = 0x39f,
  ['*P'] = 0x3a0,
  ['*Q'] = 0x3a8,
  ['*R'] = 0x3a1,
  ['*S'] = 0x3a3,
  ['*T'] = 0x3a4,
  ['*U'] = 0x3a5,
  ['*W'] = 0x3a9,
  ['*X'] = 0x3a7,
  ['*Y'] = 0x397,
  ['*Z'] = 0x396,
  ['*a'] = 0x3b1,
  ['*b'] = 0x3b2,
  ['*c'] = 0x3be,
  ['*d'] = 0x3b4,
  ['*e'] = 0x3b5,
  ['*f'] = 0x3c6,
  ['*g'] = 0x3b3,
  ['*h'] = 0x3b8,
  ['*i'] = 0x3b9,
  ['*k'] = 0x3ba,
  ['*l'] = 0x3bb,
  ['*m'] = 0x3bc,
  ['*n'] = 0x3bd,
  ['*o'] = 0x3bf,
  ['*p'] = 0x3c0,
  ['*q'] = 0x3c8,
  ['*r'] = 0x3c1,
  ['*s'] = 0x3c3,
  ['*t'] = 0x3c4,
  ['*u'] = 0x3c5,
  ['*w'] = 0x3c9,
  ['*x'] = 0x3c7,
  ['*y'] = 0x3b7,
  ['*z'] = 0x3b6,
  ['+-'] = 0xb1,
  ['+e'] = 0x3f5,
  ['+f'] = 0x3d5,
  ['+h'] = 0x3d1,
  ['+p'] = 0x3d6,
  [','] = 0x200c,
  [',C'] = 0xc7,
  [',c'] = 0xe7,
  ['-'] = 0x2212,
  ['-+'] = 0x2213,
  ['->'] = 0x2192,
  ['-D'] = 0xd0,
  ['-h'] = 0x210f,
  ['.i'] = 0x131,
  ['/'] = 0x200c,
  ['/L'] = 0x141,
  ['/O'] = 0xd8,
  ['/_'] = 0x2220,
  ['/l'] = 0x142,
  ['/o'] = 0xf8,
  ['0'] = 0x2007,
  ['12'] = 0xbd,
  ['14'] = 0xbc,
  ['18'] = 0x215b,
  ['34'] = 0xbe,
  ['38'] = 0x215c,
  ['3d'] = 0x2234,
  ['58'] = 0x215d,
  ['78'] = 0x215e,
  [':'] = 0x200c,
  [':A'] = 0xc4,
  [':E'] = 0xcb,
  [':I'] = 0xcf,
  [':O'] = 0xd6,
  [':U'] = 0xdc,
  [':Y'] = 0x178,
  [':a'] = 0xe4,
  [':e'] = 0xeb,
  [':i'] = 0xef,
  [':o'] = 0xf6,
  [':u'] = 0xfc,
  [':y'] = 0xff,
  ['<-'] = 0x2190,
  ['<<'] = 0x226a,
  ['<='] = 0x2264,
  ['<>'] = 0x2194,
  ['=='] = 0x2261,
  ['=~'] = 0x2245,
  ['>='] = 0x2265,
  ['>>'] = 0x226b,
  ['AE'] = 0xc6,
  ['AN'] = 0x2227,
  ['Ah'] = 0x2135,
  ['Bq'] = 0x201e,
  ['CL'] = 0x2663,
  ['CR'] = 0x21b5,
  ['Cs'] = 0xa4,
  ['DI'] = 0x2666,
  ['Do'] = 0x24,
  ['Eu'] = 0x20ac,
  ['Fc'] = 0xbb,
  ['Fi'] = 0xfb03,
  ['Fl'] = 0xfb04,
  ['Fn'] = 0x192,
  ['Fo'] = 0xab,
  ['HE'] = 0x2265,
  ['IJ'] = 0x132,
  ['Im'] = 0x2111,
  ['OE'] = 0x152,
  ['OK'] = 0x2713,
  ['OR'] = 0x2228,
  ['Of'] = 0xaa,
  ['Om'] = 0xba,
  ['Po'] = 0xa3,
  ['Re'] = 0x211c,
  ['S1'] = 0xb9,
  ['S2'] = 0xb2,
  ['S3'] = 0xb3,
  ['SP'] = 0x2660,
  ['Sd'] = 0xf0,
  ['TP'] = 0xde,
  ['Tp'] = 0xfe,
  ['Ye'] = 0xa5,
  ['^'] = 0x2009,
  ['^A'] = 0xc2,
  ['^E'] = 0xca,
  ['^I'] = 0xce,
  ['^O'] = 0xd4,
  ['^U'] = 0xdb,
  ['^a'] = 0xe2,
  ['^e'] = 0xea,
  ['^i'] = 0xee,
  ['^o'] = 0xf4,
  ['^u'] = 0xfb,
  ['`A'] = 0xc0,
  ['`E'] = 0xc8,
  ['`I'] = 0xcc,
  ['`O'] = 0xd2,
  ['`U'] = 0xd9,
  ['`a'] = 0xe0,
  ['`e'] = 0xe8,
  ['`i'] = 0xec,
  ['`o'] = 0xf2,
  ['`u'] = 0xf9,
  ['ae'] = 0xe6,
  ['an'] = 0x23af,
  ['ap'] = 0x223c,
  ['aq'] = 0x27,
  ['at'] = 0x40,
  ['ba'] = 0x7c,
  ['bb'] = 0xa6,
  ['bq'] = 0x201a,
  ['br'] = 0x2502,
  ['braceex'] = 0x23aa,
  ['braceleftbt'] = 0x23a9,
  ['braceleftex'] = 0x23aa,
  ['braceleftmid'] = 0x23a8,
  ['bracelefttp'] = 0x23a7,
  ['bracerightbt'] = 0x23ad,
  ['bracerightex'] = 0x23aa,
  ['bracerightmid'] = 0x23ac,
  ['bracerighttp'] = 0x23ab,
  ['bracketleftbt'] = 0x23a3,
  ['bracketleftex'] = 0x23a2,
  ['bracketlefttp'] = 0x23a1,
  ['bracketrightbt'] = 0x23a6,
  ['bracketrightex'] = 0x23a5,
  ['bracketrighttp'] = 0x23a4,
  ['bu'] = 0x2022,
  ['bv'] = 0x23aa,
  ['c*'] = 0x2297,
  ['c+'] = 0x2295,
  ['ca'] = 0x2229,
  ['ci'] = 0x25cb,
  ['co'] = 0xa9,
  ['coproduct'] = 0x2210,
  ['cq'] = 0x2019,
  ['ct'] = 0xa2,
  ['cu'] = 0x222a,
  ['dA'] = 0x21d3,
  ['da'] = 0x2193,
  ['dd'] = 0x2021,
  ['de'] = 0xb0,
  ['dg'] = 0x2020,
  ['di'] = 0xf7,
  ['dq'] = 0x22,
  ['em'] = 0x2014,
  ['en'] = 0x2013,
  ['eq'] = 0x3d,
  ['es'] = 0x2205,
  ['eu'] = 0x20ac,
  ['f/'] = 0x2044,
  ['fa'] = 0x2200,
  ['fc'] = 0x203a,
  ['ff'] = 0xfb00,
  ['fi'] = 0xfb01,
  ['fl'] = 0xfb02,
  ['fm'] = 0x2032,
  ['fo'] = 0x2039,
  ['gr'] = 0x2207,
  ['hA'] = 0x21d4,
  ['hbar'] = 0x210f,
  ['hy'] = 0x2010,
  ['ib'] = 0x2286,
  ['if'] = 0x221e,
  ['ij'] = 0x133,
  ['integral'] = 0x222b,
  ['ip'] = 0x2287,
  ['is'] = 0x222b,
  ['lA'] = 0x21d0,
  ['lB'] = 0x5b,
  ['lC'] = 0x7b,
  ['la'] = 0x2329, -- 0x27e8 doesn't seem to work
  ['lb'] = 0x23a9,
  ['lc'] = 0x2308,
  ['lf'] = 0x230a,
  ['lh'] = 0x261a, -- groff_char(7) wants 0x261c
  ['lk'] = 0x23a8,
  ['lq'] = 0x201c,
  ['lt'] = 0x23a7,
  ['lz'] = 0x25ca,
  ['mc'] = 0xb5,
  ['md'] = 0x22c5,
  ['mi'] = 0x2212,
  ['mo'] = 0x2208,
  ['mu'] = 0xd7,
  ['nb'] = 0x2284,
  ['nc'] = 0x2285,
  ['ne'] = 0x2262,
  ['nm'] = 0x2209,
  ['no'] = 0xac,
  ['oA'] = 0xc5,
  ['oa'] = 0xe5,
  ['oe'] = 0x153,
  ['oq'] = 0x2018,
  ['or'] = 0x7c,
  ['parenleftbt'] = 0x239d,
  ['parenleftex'] = 0x239c,
  ['parenlefttp'] = 0x239b,
  ['parenrightbt'] = 0x23a0,
  ['parenrightex'] = 0x239f,
  ['parenrighttp'] = 0x239e,
  ['pc'] = 0xb7,
  ['pd'] = 0x2202,
  ['pl'] = 0x2b,
  ['pp'] = 0x22a5,
  ['product'] = 0x220f,
  ['ps'] = 0xb6,
  ['pt'] = 0x221d,
  ['r!'] = 0xa1,
  ['r?'] = 0xbf,
  ['rA'] = 0x21d2,
  ['rB'] = 0x5d,
  ['rC'] = 0x7d,
  ['ra'] = 0x232a, -- 0x27e9 doesn't work
  ['rb'] = 0x23ad,
  ['rc'] = 0x2309,
  ['rf'] = 0x230b,
  ['rg'] = 0xae,
  ['rh'] = 0x261b, -- groff_char(7) wants 0x261e
  ['rk'] = 0x23ac,
  ['rn'] = 0x203e,
  ['rq'] = 0x201d,
  ['rs'] = 0x5c,
  ['rt'] = 0x23ab,
  ['ru'] = 0x5f,
  ['sb'] = 0x2282,
  ['sc'] = 0xa7,
  ['sd'] = 0x2033,
  ['sh'] = 0x23,
  ['sl'] = 0x2f,
  ['sp'] = 0x2283,
  ['sq'] = 0x25a1,
  ['sqrt'] = 0x221a,
  ['sr'] = 0x221a,
  ['ss'] = 0xdf,
  ['st'] = 0x220d, -- groff_char(7) wants 0x220b but that's too big
  ['sum'] = 0x2211,
  ['t+-'] = 0xb1,
  ['tdi'] = 0xf7,
  ['te'] = 0x2203,
  ['tf'] = 0x2234,
  ['tm'] = 0x2122,
  ['tmu'] = 0xd7,
  ['tno'] = 0xac,
  ['ts'] = 0x3c2,
  ['uA'] = 0x21d1,
  ['ua'] = 0x2191,
  ['ul'] = 0x5f,
  ['vA'] = 0x21d5,
  ['vS'] = 0x160,
  ['vZ'] = 0x17d,
  ['va'] = 0x2195,
  ['vs'] = 0x161,
  ['vz'] = 0x17e,
  ['wp'] = 0x2118,
  ['yogh'] = 0x21d,
  ['|'] = 0x2006,
  ['|='] = 0x2243,
  ['~'] = 0xa0, -- &nbsp;
  ['~='] = 0x2248,
  ['~A'] = 0xc3,
  ['~N'] = 0xd1,
  ['~O'] = 0xd5,
  ['~a'] = 0xe3,
  ['~n'] = 0xf1,
  ['~o'] = 0xf5,
  ['~~'] = 0x2248,

}

function defglyph(w, s)
  Glyph_table[w] = s
end

function initialize_glyphs()
  defglyph('htmllt', '\\[htmllt]')
  defglyph('htmlgt', '\\[htmlgt]')
  defglyph('htmlquot', '\\[htmlquot]')
  defglyph('htmlamp', '\\[htmlamp]')
  defglyph('htmlbackslash', '\\[htmlbackslash]')
  defglyph('htmlspace', '\\[htmlspace]')

  for k,v in pairs(Standard_glyphs) do
    defglyph(k, verbatim(string.format('&#x%x;', v)))
  end
end 
